

ytd-watch-flexy{

/* custom size for meta-contents */
    --meta-contents-default-height-outer:30px;
    --userscript-meta-default-outline-thickness:1px;
    --meta-contents-padding-vertical:4px;
    --meta-contents-default-height-inner:calc(var(--meta-contents-default-height-outer) - var(--meta-contents-padding-vertical) * 2);
    --meta-contents-default-height-outer-plus-outline:calc(var(--meta-contents-default-height-outer) + var(--userscript-meta-default-outline-thickness) * 2);

/* recalculation of right-tab height */
    --userscript-top-bar-height: var(--ytd-masthead-height, var(--ytd-toolbar-height));
    --userscript-below-height: calc(100vh - var(--userscript-top-bar-height) - var(--ytd-watch-flexy-panel-max-height) );
    --userscript-h1:calc(var(--ytd-watch-flexy-panel-max-height) + var(--userscript-below-height));
    --userscript-h-tab-btn:46px;
    --userscript-h2:calc(var(--userscript-h1) - var(--userscript-h-tab-btn) - var(--ytd-margin-6x));
    --userscript-base-height: calc(var(--userscript-h2) - var(--ytd-margin-6x));

/*

    --userscript-two-columns-player-height: calc( 0.5 * (var(--ytd-watch-flexy-max-player-width) + var(--ytd-watch-flexy-min-player-width)) * var(--ytd-watch-flexy-height-ratio) / var(--ytd-watch-flexy-width-ratio));

    --userscript-column-height: calc(var(--userscript-base-height) + 46px);
    --userscript-primary-offset: calc(var(--userscript-column-height) - )
*/
}

ytd-watch-flexy #right-tabs{
    display:block;
}
body ytd-sentiment-bar-renderer{
    padding-top:2px;
    padding-bottom:0;
}






ytd-watch-flexy[flexy] #primary #player ~ #meta #meta-contents{
    margin-left: calc(5% + var(--userscript-meta-default-outline-thickness));
    margin-right: calc(5% + var(--userscript-meta-default-outline-thickness));
    width: calc(90% - var(--userscript-meta-default-outline-thickness) * 2);

    --box-shadow-thickness-1: var(--userscript-meta-default-outline-thickness);
    --box-shadow-thickness-2: var(--box-shadow-thickness-1) var(--box-shadow-thickness-1);
    box-shadow:0 0 var(--box-shadow-thickness-2) var(--ytd-searchbox-border-color, rgba(0,0,0,0.22));

}
 

ytd-watch-flexy[flexy] #primary #player ~ #meta #meta-contents{
    --border-radius-2: var(--border-radius-1) var(--border-radius-1);
}

ytd-watch-flexy[flexy] #primary #player ~ #meta #meta-contents:not(:hover){
    --border-radius-1: 8px;
}
ytd-watch-flexy[flexy] #primary #player ~ #meta #meta-contents:hover{
    --border-radius-1: 24px;
}
ytd-watch-flexy[flexy][is-two-columns_] #primary #player ~ #meta #meta-contents{
    border-radius: var(--border-radius-2) 0 0;
}
ytd-watch-flexy[flexy]:not([is-two-columns_]) #primary #player ~ #meta #meta-contents{
    border-radius: var(--border-radius-2) var(--border-radius-2);
}
ytd-watch-flexy[flexy] #primary #player ~ #meta #meta-contents:not(:hover){
    height: calc(var(--meta-contents-default-height-outer)); 
    overflow: hidden;
}

ytd-watch-flexy[flexy] #primary #player ~ #meta{
    position:relative;
    height: calc(var(--meta-contents-default-height-outer)); 
    min-height: calc(var(--meta-contents-default-height-outer));  /* under flex */
}


/* for single column only. just try to see the effect */
/* image cannot be shown */
/*
html ytd-watch-flexy[flexy]:not([is-two-columns_]) #primary #player ~ #meta{
    position: relative;
    height: auto;
    overflow:auto;
}

html ytd-watch-flexy[flexy]:not([is-two-columns_]) #primary #player ~ #meta #meta-contents{
    position: relative;
    height: auto;
    overflow:auto;
}
*/
/* for single column only. just try to see the effect */



ytd-watch-flexy[flexy] #primary #primary-inner #player ~ #info{
    padding-bottom: calc( 4px );
    border: 0;
    outline: 0;
}
    



ytd-watch-flexy #meta ytd-expander{
    display:none;
}

ytd-watch-flexy #player ~ #meta #meta-contents{
    position:absolute;
    bottom:0;
    width:100%;
    box-sizing: border-box;
    border:1px solid transparent;
    border-color: var(--ytd-searchbox-legacy-button-focus-color);
    color:var(--yt-spec-text-primary);
    text-transform: var(--yt-button-text-transform, inherit);
    background-color:var(--yt-spec-general-background-b);
    opacity:1; 
}

ytd-watch-flexy #player ~ #meta #meta-contents:hover ytd-video-secondary-info-renderer{
    padding:0 24px;
}
ytd-watch-flexy #player ~ #meta #meta-contents ytd-video-secondary-info-renderer{
    border-bottom:0;
    padding:0;
    margin:0;
}
ytd-watch-flexy #player ~ #meta #meta-contents:not(:hover){
    height: auto;
    padding:0;
}

ytd-watch-flexy #player ~ #meta #meta-contents:not(:hover) #top-row{
    padding:var(--meta-contents-padding-vertical); 
}

ytd-watch-flexy #columns{
    /*padding-bottom:6px;*/  /*previous trick to make the scroll bar disappear. now dont need it? */
}

ytd-watch-flexy #meta-contents:not(:hover) *{
    padding:0;margin:0;vertical-align: middle;
} 


ytd-watch-flexy #meta-contents:not(:hover)  #top-row ytd-video-owner-renderer>*{
    align-self: center;
}

ytd-watch-flexy #meta-contents:not(:hover) yt-img-shadow#avatar{
    height: calc(var(--meta-contents-default-height-inner));
    width: calc(var(--meta-contents-default-height-inner));
    margin:0px 8px;
    vertical-align: middle;
} 
ytd-watch-flexy #meta-contents:not(:hover) yt-img-shadow#avatar img{
    height: calc(var(--meta-contents-default-height-inner));
    width: calc(var(--meta-contents-default-height-inner));
} 
ytd-watch-flexy #meta-contents:not(:hover) yt-img-shadow#avatar:not([loaded]){
    opacity:0;
}   
#columns>yt-img-shadow, #columns>img{
    position: absolute;
    z-index:-1;
    visibility:collapse;
}

ytd-watch-flexy #meta-contents yt-img-shadow#avatar[loaded]{
box-shadow:0 0px 2px 2px var(--ytd-searchbox-border-color, rgba(0,0,0,0.22))
}

ytd-watch-flexy #meta-contents:not(:hover) #owner-sub-count{
    display:none;
}

/* show button with smaller size (non-hover meta-content) -> (badge icon) */
ytd-watch-flexy #meta-contents:not(:hover) tp-yt-paper-button{
    height: calc( var(--meta-contents-default-height-inner) );
    margin:0px 8px;
    padding: 10px 0;
    zoom:0.9;
}
/* margin for (non-hover meta-content) -> (badge icon) */
ytd-watch-flexy #meta-contents:not(:hover) ytd-badge-supported-renderer{
    margin:0px 8px;
}
/* just ensure nowrap for (non-hover meta-content)'s flex layout */
ytd-watch-flexy #meta-contents:not(:hover) #top-row{
    flex-wrap: nowrap;
}
/* vertical center for (non-hover meta-content)'s (button text) */
ytd-watch-flexy #meta-contents:not(:hover) tp-yt-paper-button yt-formatted-string{
    line-height: 100%;
}



ytd-watch-flexy #meta-contents:not(:hover) #top-row{
    zoom:0.95;
} 



body ytd-live-chat-frame.ytd-watch-flexy#chat{
    margin-bottom: 8px;
}

#right-tabs #material-tabs{
    position:relative;
    display:flex;
    padding:0; 
    outline: 1px solid var(--userscript-border-color);
}

#right-tabs{
    --userscript-border-color: var(--yt-spec-10-percent-layer);
}
 

#right-tabs>.tab-content{
    outline: 1px solid var(--userscript-border-color);
}


/* give background color; otherwise it will be transparent in dark mode, single column*/
ytd-watch-flexy #right-tabs #material-tabs{
    background:var(--yt-spec-general-background-a);
}

#right-tabs #material-tabs>a[userscript-tab-content]{
    flex:1;
    position:relative;
    display:inline-block;
    text-decoration:none;
    text-transform:uppercase;
    color:var(--yt-spec-text-secondary);
    text-align:center;
    padding:14px 2px 10px 2px;
    border:0;
    border-bottom:4px transparent solid;
    font-weight:500;
    font-size:12px;
    line-height:18px;
    cursor:pointer;
    transition: border 200ms linear 100ms;
    background-color: var(--ytd-searchbox-legacy-button-color);
    text-transform: var(--yt-button-text-transform, inherit);
    user-select: none !important;

    overflow: hidden;
    white-space: nowrap;
/*text-overflow: ellipsis;*/
text-overflow: clip;

}



#right-tabs #material-tabs>a[userscript-tab-content] svg{
    height:18px;
    padding-right:4px;
    vertical-align:bottom;
    opacity:.5;
    margin-right:4px;
    color: var(--yt-button-color, inherit);
    fill: var(--iron-icon-fill-color, currentcolor);
    stroke: var(--iron-icon-stroke-color, none);
}
#right-tabs #material-tabs>a[userscript-tab-content].active{
    font-weight:500;
    outline:0;
    color:var(--yt-spec-text-primary);
    background-color:var(--ytd-searchbox-legacy-button-focus-color);
    border-bottom:4px #ff4533 solid;
    border-bottom-color:var(--yt-brand-light-red);
}
#right-tabs #material-tabs>a[userscript-tab-content].active svg{
    opacity:.9 
}
#right-tabs #material-tabs>a[userscript-tab-content]:not(.active):hover{
    background-color:var(--ytd-searchbox-legacy-button-hover-color);
    color:var(--yt-spec-text-primary);
}
#right-tabs #material-tabs>a[userscript-tab-content]:not(.active):hover svg{
    opacity:.9 
}

#right-tabs #material-tabs a[userscript-tab-content]{
    user-select: none !important;
}

#right-tabs #material-tabs a[userscript-tab-content].tab-btn-hidden{
    display:none;
}

#right-tabs #material-tabs a[userscript-tab-content].tab-btn-hidden paper-ripple{
    display:none;
}

/* show the loading comment tab in grey color */
ytd-watch-flexy:not([userscript-chatblock="chat-live"]) #right-tabs #material-tabs a[userscript-tab-content="#tab-comments"].tab-btn-hidden, 
ytd-watch-flexy:not([userscript-chatblock="chat-live"]) #right-tabs #material-tabs a[userscript-tab-content="#tab-comments"].tab-btn-hidden:hover{
    display:inline-block;
    color: var(--yt-spec-icon-disabled);
    pointer-events: none;
}

  /* Demo: https://jsfiddle.net/9ehxr23g/ */

@keyframes animatedLoading {
    0% {
        content: "⚫⚪⚪⚪⚪";
        font-family: sans-serif;
    }
    25% {
        content: "⚪⚫⚪⚪⚪";
        font-family: sans-serif;
    }
    50% {
        content: "⚪⚪⚫⚪⚪";
        font-family: sans-serif;
    }
    75%{

        content: "⚪⚪⚪⚫⚪";
        font-family: sans-serif;
    }
    100%{
        content: "⚪⚪⚪⚪⚫";
        font-family: sans-serif;
    }
    
}

@keyframes animatedFetching {
    0% {
        content: "⚪⚪⚪⚪⚪";
        font-family: sans-serif;
    }
    100% {
        content: "⚫⚫⚫⚫⚫";
        font-family: sans-serif;
    }
}
  
  /* Demo: https://jsfiddle.net/9ehxr23g/ */




 

.tab-btn span#tab3-txt-loader:empty::after{
    display: inline-block;
    width: 4em;
    text-align:left;
    font-size: inherit;
    color: currentColor;
    transform: scaleX(0.8);
}

.tab-btn.tab-btn-hidden span#tab3-txt-loader:empty::after{
    animation: animatedLoading 300ms linear infinite alternate;
    content: " ";
}

.tab-btn:not(.tab-btn-hidden) span#tab3-txt-loader:empty::after{
    animation: animatedFetching 80ms linear infinite alternate;
    content: " ";
}


#right-tabs .tab-content-cld{
/*    box-shadow:0 2px 4px 0 var(--ytd-searchbox-border-color, rgba(0,0,0,.22));*/

}

#right-tabs>.tab-content{
    padding:0;
    box-sizing: border-box;
    display:block;
    --yt-spec-brand-background-primary:var(--yt-spec-general-background-a);
}
#right-tabs .tab-content .tab-content-cld{
    box-sizing: border-box;
    position:relative;
    display:block;
    max-width: 100%;
    overflow: auto;
    min-height: var(--userscript-min-height);
    max-height: var(--userscript-available-height);
    --tab-content-padding:16px;
    padding:var(--tab-content-padding);
}

/* too many space at the right */
#right-tabs .tab-content .tab-content-cld#tab-comments,
#right-tabs .tab-content .tab-content-cld#tab-videos
{
    padding-right: 4px;
}

/* playlist container double scrolling */
#right-tabs .tab-content .tab-content-cld#tab-list{

    padding:0;
    overflow:hidden;
}

/* fix the rendering block overflow x problem */
#right-tabs .tab-content .tab-content-cld#tab-videos ytd-compact-video-renderer yt-interaction.extended{
    max-width: 100%;
}



@supports (content-visibility: hidden){
    
    /* speed up rendering */

    .tab-content-cld #contents, .tab-content-cld #sections, .tab-content-cld #items{
        content-visibility: auto;
    }
/*
    .tab-content-cld ytd-comment-replies-renderer #contents{
        content-visibility: visible;
    }*/

    .tab-content-cld ytd-comment-renderer, .tab-content-cld ytd-compact-video-renderer{
        content-visibility: visible;
    }

    .tab-content-cld #continuations{
        content-visibility: visible;
    }

    .tab-content-cld ytd-popup-container, 
    .tab-content-cld tp-yt-iron-dropdown, 
    .tab-content-cld #contentWrapper, 
    .tab-content-cld ytd-menu-popup-renderer{
        content-visibility: visible;


    }

    ytd-live-chat-frame#chat, ytd-live-chat-frame#chat iframe{
        
        content-visibility: visible;
    }

}

@supports (contain-intrinsic-size: var(--userscript-base-height)){
    /* make "visible scrollable area" fit (i.e. smaller) for {#continuations} to retrieve proper amount of comments */

    .tab-content-cld #contents, .tab-content-cld #sections, .tab-content-cld #items{
        contain-intrinsic-size: var(--userscript-base-height); /* fix the height to base height */
    }
    .tab-content-cld ytd-comment-replies-renderer #contents{
        contain-intrinsic-size: auto; /* the size of reply of reply */ 
    }

}


#right-tabs .tab-content-cld.tab-content-hidden:not([lazy-loading]){
    display:none;
    visibility:collapse;
}

/* force the content INSIDE the page displayable content area for rendering */
#right-tabs .tab-content .tab-content-cld.tab-content-hidden[lazy-loading]{
    position: fixed;
    z-index:-1;
    visibility:collapse;
    
    --width: var(--ytd-watch-flexy-sidebar-min-width, 300px);
    --height-1: var(--ytd-watch-flexy-min-player-height, 480px);

    --height-2: var(--userscript-available-height, var(--height-1));

    --height: var(--height-2);

    width: var(--width);
    height: var(--height);

    left:calc(95vw - var(--width));
    top: calc(50vh - 0.5 * var(--height));
    
    /*
    left:10vw;
    top:10vh;
    width:80vw;
    height:80vh;*/
    max-height:none;
    min-height:0;
    max-width: none;
    min-width: 0;
    pointer-events: none;
    user-select: none;
}

#right-tabs .tab-content .tab-content-cld.tab-content-hidden[lazy-loading]>ytd-comments#comments{

    max-height:none;
    min-height:0;
    max-width: none;
    min-width: 0;

    height:100%;
    width:100%;
    display:block;
    position:relative;
}



#right-tabs .tab-content #tab-info #content{
    max-height:100% 
}
#right-tabs .nav-link{
    font-size:1.6em 
}
/*
#right-tabs ytd-comments{
    width:100%!important 
}*/
@media only screen and (max-width:520px){
    #right-tabs .nav-tabs#material-tabs>li>a{
        font-size:11px 
   }
}
paper-spinner.yt-next-continuation{
    box-sizing:content-box!important 
}




ytd-live-chat-frame#chat:not([collapsed])>.ytd-live-chat-frame#show-hide-button:first-child{
    border-bottom: 1px solid var(--yt-spec-10-percent-layer);
    box-sizing: border-box;
    border-bottom-color: var(--yt-spec-general-background-a); /* css fix to background loading */
}
body ytd-watch-flexy[flexy] #chat.ytd-watch-flexy:not([collapsed]).ytd-watch-flexy, 
body ytd-watch-flexy[flexy] #chat-container.ytd-watch-flexy:not([chat-collapsed]).ytd-watch-flexy body ytd-watch-flexy[flexy][js-panel-height_] #chat.ytd-watch-flexy:not([collapsed]).ytd-watch-flexy, 
body ytd-watch-flexy[flexy][js-panel-height_] #chat-container.ytd-watch-flexy:not([chat-collapsed]).ytd-watch-flexy {
    --ytd-watch-flexy-chat-max-height2: calc(var(--userscript-base-height) - 20px);
    height: var(--ytd-watch-flexy-chat-max-height2);
    min-height: 10px;
}
ytd-watch-flexy[is-two-columns_][userscript-chatblock][userscript-chat-collapsed]{
    --userscript-available-height: calc(var(--userscript-base-height) - 42px);
    --userscript-min-height: var(--userscript-available-height);
}
ytd-watch-flexy[is-two-columns_][userscript-chatblock]:not([userscript-chat-collapsed]){
    --userscript-available-height: 46px;
    --userscript-min-height: 0;
    --userscript-chatroom-height: calc(var(--userscript-base-height) - 6px);
}
ytd-watch-flexy[is-two-columns_]:not([userscript-chatblock]):not([userscript-chat-collapsed]){
    --userscript-available-height: var(--userscript-base-height);
    --userscript-min-height: var(--userscript-available-height);
}


ytd-watch-flexy[userscript-chatblock]:not([userscript-chat-collapsed]):not([is-two-columns_]) #right-tabs{
    min-height:0; /* avoid page scroll when display of tab-content changed */
}
/*
ytd-watch-flexy:not([is-two-columns_]) #right-tabs{
    min-height: calc(100vh - var(--ytd-watch-flexy-masthead-height) - calc(var(--ytd-margin-6x) * 1) - var(--userscript-sticky));
}*/

html ytd-watch-flexy:not([fullscreen]):not([is-two-columns_]) #right-tabs .tab-content>.tab-content-cld:not(.tab-content-hidden){
    min-height: calc(100vh - var(--ytd-watch-flexy-masthead-height) - 46px - var(--ytd-margin-6x) * 0.5);
}

ytd-watch-flexy:not([is-two-columns_]) #right-tabs[userscript-sticky]{
    min-height: 0px;
}

ytd-watch-flexy:not([is-two-columns_]){

    --userscript-chatroom-height:var(--ytd-watch-flexy-chat-max-height);
}

ytd-watch-flexy:not([is-two-columns_]) #primary ytd-live-chat-frame#chat{
    position: absolute;
    z-index:-1;
    visibility:collapse;
}

ytd-watch-flexy:not([is-two-columns_]) #secondary ytd-live-chat-frame#chat{
    margin-top:0;
}

ytd-watch-flexy[is-two-columns_] ytd-playlist-panel-renderer[js-panel-height_] #container.ytd-playlist-panel-renderer{
    min-height: 0;
    max-height: var(--userscript-available-height);
}


body ytd-watch-flexy[flexy][js-panel-height_] #chat.ytd-watch-flexy:not([collapsed]).ytd-watch-flexy{

    height: var(--userscript-chatroom-height); /* not override if value not set */

}

.tab-content-cld ytd-playlist-panel-renderer{
    max-height: none !important;
    padding: 0 !important;
    margin: 0 !important;
}
ytd-watch-flexy[theater] #secondary{
    padding-bottom: 18px;
}
body ytd-video-primary-info-renderer{
    padding:12px 0 2px 0; 
}



/* left side - like menu smaller */

#primary #player ~ #info ytd-menu-renderer yt-icon-button.ytd-toggle-button-renderer {
    line-height: 1;
    padding: calc(1.0 * var(--yt-button-icon-padding, 8px));
    width: calc(0.75 * var(--yt-button-icon-size, var(--yt-icon-width, 40px)));
    height: calc(0.75 * var(--yt-button-icon-size, var(--yt-icon-height, 40px)));
}

#primary #player ~ #info ytd-menu-renderer yt-icon-button.ytd-button-renderer {
    line-height: 1;
    padding: calc(1.0 * var(--yt-button-icon-padding, 8px));
    width: calc(0.75 * var(--yt-button-icon-size, var(--yt-icon-width, 40px)));
    height: calc(0.75 * var(--yt-button-icon-size, var(--yt-icon-height, 40px)));
}

#primary #player ~ #info ytd-menu-renderer #button.ytd-menu-renderer {
    width: calc(0.75 * var(--paper-icon-button_-_width, var(--yt-icon-width)));
    height: calc(0.75 * var(--paper-icon-button_-_height, var(--yt-icon-height)));
}


body #menu-container ytd-menu-renderer{
    margin-top:-10px;
    /*margin-top:-10px;
    zoom:0.85;*/
}

#primary #player ~ #info{
    /*zoom:0.96;*/
}
#primary #player ~ #info ytd-menu-renderer a{
    white-space: nowrap;
}
#primary #player ~ #info ytd-menu-renderer yt-icon-button{
    /*zoom:0.9;*/
}

/* smaller text in tab Info */
#right-tabs>.tab-content #tab-info>ytd-expander{
    zoom: 0.95;
}

/* smaller text in tab Comments */
#right-tabs>.tab-content #tab-comments>#comments #main.ytd-comment-renderer{
    zoom: 0.95;
}

/* smaller text for tab Videos */
#right-tabs .tab-content .tab-content-cld#tab-videos [placeholder-videos] {
    zoom:0.94;
}

#right-tabs>.tab-content #tab-comments>#comments ytd-comments-header-renderer{
    padding:0;margin-top:0;margin-left:0;margin-right:0;
/*    margin-bottom:var(--ytd-comment-thread-margin-bottom, 16px);*/
}

#right-tabs>.tab-content #tab-info ytd-expander{
    /* space fix for tab INFO */
    padding:0;
    margin:0;
}

#right-tabs>.tab-content #tab-info ytd-expander, #right-tabs>.tab-content #tab-info ytd-expander .content.ytd-metadata-row-header-renderer, #right-tabs>.tab-content #tab-info ytd-expander #title.ytd-metadata-row-renderer, #right-tabs>.tab-content #tab-info ytd-expander .ytd-metadata-row-renderer, #right-tabs>.tab-content #tab-info ytd-expander ytd-metadata-row-renderer {
    
/* smaller text for tab INFO */
    font-size: var(--ytd-user-comment_-_font-size);
    font-weight: var(--ytd-user-comment_-_font-weight);
    line-height: var(--ytd-user-comment_-_line-height);
    letter-spacing: var(--ytd-user-comment_-_letter-spacing);
}




 




/* align scrollbar style */
[userscript-scrollbar-render]::-webkit-scrollbar {
    width: 16px;
}
[userscript-scrollbar-render]::-webkit-scrollbar-thumb {
    height: 56px;
    border-radius: 8px;
    border: 4px solid transparent;
    background-clip: content-box;
    background-color: var(--yt-spec-text-secondary);
}
/* Colorize the scroll bar (chrome, safari, edge) */
[userscript-scrollbar-render]::-webkit-scrollbar-thumb, [userscript-scrollbar-render]::-webkit-scrollbar-thumb{
    background-color: var(--paper-checkbox-unchecked-color) !important;
}
[userscript-scrollbar-render]::-webkit-scrollbar-thumb:hover, [userscript-scrollbar-render]::-webkit-scrollbar-thumb:hover{
    background-color:var(--paper-checkbox-checked-color) !important;
}




/* align scrollbar style */
[userscript-scrollbar-render] > *:only-child::-webkit-scrollbar {
    width: 16px;
}
[userscript-scrollbar-render] > *:only-child::-webkit-scrollbar-thumb {
    height: 56px;
    border-radius: 8px;
    border: 4px solid transparent;
    background-clip: content-box;
    background-color: var(--yt-spec-text-secondary);
}
/* Colorize the scroll bar (chrome, safari, edge) */
[userscript-scrollbar-render] > *:only-child::-webkit-scrollbar-thumb, [userscript-scrollbar-render] > *:only-child::-webkit-scrollbar-thumb{
    background-color: var(--paper-checkbox-unchecked-color) !important;
}
[userscript-scrollbar-render] > *:only-child::-webkit-scrollbar-thumb:hover, [userscript-scrollbar-render] > *:only-child::-webkit-scrollbar-thumb:hover{
    background-color:var(--paper-checkbox-checked-color) !important;
}




#right-tabs{ 
    padding:0;
    margin:0;
}


#tab-list ytd-playlist-panel-renderer>#container.ytd-playlist-panel-renderer{
    /* hide playlist default border */
    border:0;
}

#tab-list ytd-playlist-panel-renderer#playlist yt-icon-button#expand-button{
    /* hide expand button */
    display:none;
}

#tab-list ytd-playlist-panel-renderer#playlist #header-description, #tab-list ytd-playlist-panel-renderer#playlist  #header-description yt-formatted-string[class]{

/* fix playlist title */

    font-size: var(--ytd-user-comment_-_font-size);
    font-weight: var(--ytd-user-comment_-_font-weight);
    line-height: var(--ytd-user-comment_-_line-height);
    letter-spacing: var(--ytd-user-comment_-_letter-spacing);
    height: calc(1 * var(--ytd-subheadline-one-line-ellipsis_-_max-height));
    white-space: nowrap;
    
}


#tab-list ytd-playlist-panel-renderer#playlist #header-contents:hover #header-description, #tab-list ytd-playlist-panel-renderer#playlist  #header-contents:hover #header-description yt-formatted-string[class]{
    height: auto;
    max-height:none;
    white-space: normal;
}

#tab-list ytd-playlist-panel-renderer#playlist #header-contents {
    cursor:default;
}
#tab-list ytd-playlist-panel-renderer#playlist #header-contents #publisher-container, #tab-list ytd-playlist-panel-renderer#playlist #header-contents #playlist-actions{
    display:none;
}


#tab-list ytd-playlist-panel-renderer#playlist #header-contents:hover #publisher-container, #tab-list ytd-playlist-panel-renderer#playlist #header-contents:hover #playlist-actions{
    display:block;
}

#tab-list ytd-playlist-panel-renderer#playlist #container > .header{
box-sizing: border-box;
    position: absolute;
    width: 100%;
    z-index: 1;
    min-height: calc(1 * var(--ytd-subheadline-one-line-ellipsis_-_max-height));
    max-height:none;
    padding:10px 16px;
    box-shadow:0 2px 4px 0 var(--ytd-searchbox-border-color, rgba(0,0,0,.22));
    margin-top:1px; /* as tab use outline 1px */
}



/* ytd-playlist-panel-renderer */

#tab-list ytd-playlist-panel-renderer#playlist #container>.header+ #items{
    margin-top:calc(1 * var(--ytd-subheadline-one-line-ellipsis_-_max-height) + 32px);  
}
        
#tab-list ytd-playlist-panel-renderer#playlist #container>.header{
    background-color: var(--yt-spec-general-background-b);
    
}

#tab-list ytd-playlist-panel-renderer#playlist #container>.header yt-icon-button{
    background-color: var(--yt-spec-badge-chip-background);
}



/* hide playlist border & toggle button */


/* hide videos list & play list before script loading */
#related:not(:only-child)>ytd-watch-next-secondary-results-renderer,
[placeholder-videos]:not(:only-child)>ytd-watch-next-secondary-results-renderer,
#related:not([placeholder-videos])>ytd-watch-next-secondary-results-renderer, 
#related > #related-skeleton, #related > #player-ads,
*:not(#ytd-userscript-playlist) > ytd-playlist-panel-renderer#playlist{
    position: absolute;
    z-index: -1;
    visibility:collapse;
    pointer-events: none;
    max-height: 40px;
    overflow:hidden;
    margin-top:-40px;
}
#primary #meta-contents ytd-expander{
    position: absolute;
    z-index: -1;
    visibility:collapse;
    pointer-events: none;
    max-height: 40px;
    overflow:hidden;
    margin-top:-40px;
}
#primary ytd-comments#comments{
    position: absolute;
    z-index: -1;
    visibility:collapse;
    pointer-events: none;
}




/* responsive to non-column flexy */
ytd-watch-flexy:not([is-two-columns_]) #columns.ytd-watch-flexy{
    flex-direction: column; /* from (flex-direction: column;) | overriding {#columns.ytd-watch-flexy} */
    --ytd-watch-flexy-sidebar-width: 
}
ytd-watch-flexy:not([is-two-columns_]) #columns #secondary.ytd-watch-flexy{
    display:block; /* from (display: inline-block;) | overiding {ytd-watch-flexy:not([is-two-columns_]) #secondary.ytd-watch-flexy} */
}

/* hide original right tabs {#related} */
/* Youtube coding - under resizing window - relocate it between {#primary} and {#secondary} */
#related:not([placeholder-videos]){
    position: absolute;
    z-index: -1;
    visibility:collapse;
    pointer-events: none;
    max-height: 40px;
    overflow:hidden;
    margin-top:-40px;
}

/* css fix for responsive two columns flex , width */

ytd-watch-flexy[flexy]:not([is-two-columns_])  #secondary.ytd-watch-flexy {
    min-width: var(--ytd-watch-flexy-min-player-width);
    width: auto;
}
ytd-watch-flexy[flexy][is-two-columns_]  #secondary.ytd-watch-flexy {
    width: var(--ytd-watch-flexy-sidebar-width);
    min-width: var(--ytd-watch-flexy-sidebar-min-width);
}

ytd-watch-flexy[theater][is-two-columns_] #secondary.ytd-watch-flexy { 
    margin-top: calc(var(--ytd-margin-6x) * 0.5);
    padding-bottom: 0;
}



/* css fix for responsive two columns flex , align {#secondary} style like {#primary} */
ytd-watch-flexy[flexy]:not([is-two-columns_]) #secondary.ytd-watch-flexy {
    margin-left: var(--ytd-margin-6x);
    padding-right: var(--ytd-margin-6x);
}

html ytd-watch-flexy:not([fullscreen]):not([is-two-columns_]) #secondary.ytd-watch-flexy{
    margin-top:0;
    margin-bottom:0;
    padding-top: calc(var(--ytd-margin-6x) * 0.5);
    padding-bottom: calc(var(--ytd-margin-6x) * 0.5);
}

/*
ytd-watch-flexy[flexy]:not([is-two-columns_]) #right-tabs[userscript-sticky]>.tab-content{
    max-height: calc(100vh - var(--ytd-watch-flexy-masthead-height) - calc(var(--ytd-margin-6x) * 0.5) - var(--userscript-sticky));
}*/

html ytd-watch-flexy:not([fullscreen]):not([is-two-columns_]) #ytd-userscript-playlist #container{

    max-height: calc(100vh - var(--ytd-watch-flexy-masthead-height) - calc(var(--ytd-margin-6x) * 1) - var(--userscript-sticky));
}



html ytd-watch-flexy:not([fullscreen]):not([is-two-columns_]) #primary.ytd-watch-flexy{
    margin-top:0;
    margin-bottom:0;
    padding-top: calc(var(--ytd-margin-6x) * 0.5);
    padding-bottom: 0;

}



/*
html ytd-watch-flexy[userscript-chatblock]:not([userscript-chat-collapsed]):not([fullscreen]):not([is-two-columns_]) #secondary.ytd-watch-flexy{

    padding-top: calc(var(--ytd-margin-6x) * 0.25);
    padding-bottom: calc(var(--ytd-margin-6x) * 0.25);

}*/

/*
ytd-watch-flexy[theater]{
    --ytd-watch-flexy-sidebar-width: calc(402px * 0.66);
    --ytd-watch-flexy-sidebar-min-width: calc(300px * 0.66);
}*/

/* two column mainly;  theater view make font smaller */
ytd-watch-flexy[theater] #player ~ #info #info-contents .title{
    font-size:var(--ytd-user-comment_-_font-size);
}

/* reference dimension */
/*
ytd-watch-flexy {
    --ytd-watch-flexy-sidebar-width: 402px;
    --ytd-watch-flexy-sidebar-min-width: 300px;
    --ytd-watch-flexy-masthead-height: 56px;
    min-width: 0;
}
ytd-watch-flexy[flexy] {
    --ytd-watch-flexy-width-ratio: 16;
    --ytd-watch-flexy-height-ratio: 9;
    --ytd-watch-flexy-space-below-player: 136px;
    --ytd-watch-flexy-non-player-height: calc( var(--ytd-watch-flexy-masthead-height) + var(--ytd-margin-6x) + var(--ytd-watch-flexy-space-below-player) );
    --ytd-watch-flexy-non-player-width: calc( var(--ytd-watch-flexy-sidebar-width) + (3 * var(--ytd-margin-6x)) );
    --ytd-watch-flexy-min-player-height: 240px;
    --ytd-watch-flexy-min-player-width: calc( var(--ytd-watch-flexy-min-player-height) * (var(--ytd-watch-flexy-width-ratio) / var(--ytd-watch-flexy-height-ratio)) );
    --ytd-watch-flexy-max-player-height: calc( 100vh - ( var(--ytd-watch-flexy-masthead-height) + var(--ytd-margin-6x) + var(--ytd-watch-flexy-space-below-player) ) );
    --ytd-watch-flexy-max-player-width: calc( ( 100vh - ( var(--ytd-watch-flexy-masthead-height) + var(--ytd-margin-6x) + var(--ytd-watch-flexy-space-below-player) ) ) * (var(--ytd-watch-flexy-width-ratio) / var(--ytd-watch-flexy-height-ratio)) );
}
*/

/* <<< sticky right-tabs header --- */

    /* keep the single column view css as simple as possible */
    /* use js coding to make it like sticky */
    /* tried native sticky but the sticky element is "covered" by tab content (z-index no use) */
    #right-tabs>header{
        position:relative;
        box-sizing:border-box;
    }
    ytd-watch-flexy[flexy] #right-tabs>header{
        background-color:var(--yt-spec-general-background-a);
    }
    ytd-watch-flexy[flexy]:not([is-two-columns_]) #right-tabs[userscript-sticky]>header{
        z-index: 2;
        position: fixed;
        top: var(--ytd-watch-flexy-masthead-height);
        width: var(--userscript-sticky-width, 100%);
    }

    @supports (top: var(--ytd-watch-flexy-masthead-height-xs-x)){
        
    }

    ytd-watch-flexy[flexy]:not([is-two-columns_]) #right-tabs[userscript-sticky]{
        padding-top: var(--userscript-sticky);
    }


    

/* --- sticky right-tabs header >>> */

/* << whole page scroll bar (original-type) */

    /* the scrollbar of the entire page is wrong due to youtube coding, just hide it */
    /* siginificant empty at the right side (vertical bar) in the dark mode */
    html body {
        -ms-overflow-style: none;  /* IE and Edge */
        scrollbar-width: none;  /* Firefox */
    }
    html body::-webkit-scrollbar {
        display: none; /* Blink and Webkit */
    }

/* whole page scroll bar (original-type) >> */

/*  overflow fix */
ytd-popup-container #contentWrapper.tp-yt-iron-dropdown ytd-menu-popup-renderer[slot="dropdown-content"]{
    overflow:hidden;
}


/* <<< page height setting - two-column-normal ---  */

    /* two column height = 100vh */
    ytd-watch-flexy[flexy][is-two-columns_]:not([theater]):not([fullscreen]) #columns.ytd-watch-flexy {
        margin-bottom: 0;
        /* max-height: none; */
        height: calc(100vh - var(--ytd-watch-flexy-masthead-height));
        padding-bottom: 0;
        overflow: auto;
    } 

    /* it is possible that #info is too height, make it overflow:auto with no scroll-bar */
    ytd-watch-flexy[flexy][is-two-columns_]:not([theater]):not([fullscreen]) #primary-inner{
        overflow: auto;
        max-height: 100%;
        -ms-overflow-style: none;  /* IE and Edge */
        scrollbar-width: none;  /* Firefox */
    }
    ytd-watch-flexy[flexy][is-two-columns_]:not([theater]):not([fullscreen]) #primary-inner::-webkit-scrollbar {
        display: none; /* Blink and Webkit */
    }

    /* video player sticky at the top */

    ytd-watch-flexy[flexy][is-two-columns_]:not([theater]):not([fullscreen]) #primary-inner>#player:first-child {
        top: 0;
        position: sticky; /* as the parent is scrollable, the player can be sticky to the top */
    }


/* --- page height setting - two-column-normal >>>  */



/* <<< page height setting - two-column-theater ---  */


    /* theater mode: the player is extracted from two column view */
    /* only set padding & margin */
    ytd-watch-flexy[flexy][is-two-columns_][theater]:not([fullscreen]) #columns.ytd-watch-flexy {
        margin-bottom: 0;
        padding-bottom: 0; 
    } 

    /* theater mode same mechanism */
    ytd-watch-flexy[flexy][is-two-columns_][theater]:not([fullscreen]){
        height: calc(100vh - var(--ytd-watch-flexy-masthead-height));
        overflow:auto;
        -ms-overflow-style: none;  /* IE and Edge */
        scrollbar-width: none;  /* Firefox */
    }
    ytd-watch-flexy[flexy][is-two-columns_][theater]:not([fullscreen])::-webkit-scrollbar {
        display: none;
    }
    /* video player sticky at the top */
    ytd-watch-flexy[flexy][is-two-columns_][theater]:not([fullscreen])>#player-theater-container {
        top: 0;
        position: sticky; /* as the parent is scrollable, the player can be sticky to the top */
    }


/* --- page height setting - two-column-theater >>>  */


ytd-watch-flexy[flexy][is-two-columns_][theater]:not([fullscreen]) #columns.ytd-watch-flexy {
    margin-bottom: 0;
    padding-bottom: 0; 
} 


/* (--- chatroom loading --- */

    ytd-live-chat-frame#chat:not([yt-userscript-iframe-loaded]):not([collapsed])::before{
        position: absolute;
        content: "Loading...";
        z-index: 0;
        display: block;
        height: 100%;
        color: var(--yt-spec-text-primary);
        background-color: var(--ytd-searchbox-legacy-button-hover-border-color);
        width: 100%;
        text-align: center;
        /* line-height: 300px; */
        line-height: var(--userscript-chatroom-height);
        animation: animatedLoading 300ms linear infinite alternate;
    }


    ytd-live-chat-frame#chat:not([collapsed]){
        position: relative; 
    }

    ytd-live-chat-frame#chat:not([collapsed]) > * {
        z-index: 1;
        position: inherit;
    }


/* --- chatroom loading ---) */


/* flexbox */
ytd-watch-flexy[is-two-columns_]:not([theater]):not([fullscreen]) #primary-inner{
    display: flex;
    flex-flow: column;
    height: 100%;
}
ytd-watch-flexy[is-two-columns_]:not([theater]):not([fullscreen]) #primary-inner>#info{
    flex: 1;
}
/* flexbox */

/* flexbox */
/*
ytd-watch-flexy[is-two-columns_][theater]:not([fullscreen]) #primary-inner{

    display: flex;
    /* position: relative; *|/
    flex-direction: column;
    /* height: 110px; *|/

    /* ytd-watch-flexy[theater] #player-theater-container.ytd-watch-flexy, ytd-watch-flexy[fullscreen] #player-theater-container.ytd-watch-flexy *|/
    --player-h: calc((9 / 16) * 100vw);
    --player-maxh: calc(100vh - 169px);
    --player-minh: 480px;
    --h1: max(var(--player-h),var(--player-minh));
    --h2: min(var(--h1),var(--player-maxh));
    
    height: calc(100vh - var(--ytd-watch-flexy-masthead-height) - var(--h2) );


    display: flex;
    flex-flow: column; 
}
*/
ytd-watch-flexy[is-two-columns_][theater]:not([fullscreen]){
    display: flex;    
    flex-direction: column;
}
ytd-watch-flexy[is-two-columns_][theater]:not([fullscreen])>#columns{
    flex:1;
}
ytd-watch-flexy[is-two-columns_][theater]:not([fullscreen])>#columns #primary-inner{
    display: flex;
    flex-flow: column;
    height: 100%;
}


ytd-watch-flexy[is-two-columns_][theater]:not([fullscreen])>#columns #primary-inner>#info{
    flex: 1;
}

ytd-watch-flexy[is-two-columns_][theater]:not([fullscreen])>#columns{
    overflow:auto;

}

ytd-watch-flexy[is-two-columns_][theater]:not([fullscreen])>#columns>#primary{
    overflow:auto;
    
}
ytd-watch-flexy[is-two-columns_][theater]:not([fullscreen])>#columns>#secondary{
    overflow:hidden;
    
}
 

ytd-watch-flexy[is-two-columns_][theater]:not([fullscreen])>#columns>#primary{
        -ms-overflow-style: none;  /* IE and Edge */
        scrollbar-width: none;  /* Firefox */
    }
    ytd-watch-flexy[is-two-columns_][theater]:not([fullscreen])>#columns>#primary::-webkit-scrollbar {
        display: none;
    }

    
ytd-watch-flexy[is-two-columns_][theater]:not([fullscreen])>#columns{
    width:100%; /* otherwise, width > 100%, right-tabs go outside screen */
    
}


/* flexbox */



ytd-watch-flexy[userscript-auto-scroll-playlist]:not([is-two-columns_]) #tab-list:not(.tab-content-hidden) ytd-playlist-panel-renderer>#container{
    max-height: none;
}




ytd-watch-flexy[is-two-columns_]:not([theater]) #tab-videos{

    flex-direction: row;
    display: flex;
    padding: 0;

}
ytd-watch-flexy[is-two-columns_]:not([theater]) #right-tabs .tab-content .tab-content-cld [placeholder-for-youtube-play-next-queue]{
    --tab-content-padding-2:var(--tab-content-padding);
    
}
/*
ytd-watch-flexy[is-two-columns_]:not([theater]) #right-tabs .tab-content .tab-content-cld [placeholder-for-youtube-play-next-queue]::before{

    content:' ';
    background:red;
    width: 100%;
    height: 16px; /*var(--tab-content-padding);*|/
    display:block;
    position:absolute;
    top: 0;
    left:0;
    z-index:3000;
    pointer-events: all;


}


ytd-watch-flexy[is-two-columns_]:not([theater]) #right-tabs .tab-content .tab-content-cld [placeholder-for-youtube-play-next-queue]::before:hover{


    background:blue;
    cursor:pointer;

}*/


ytd-watch-flexy[is-two-columns_]:not([theater]) [placeholder-for-youtube-play-next-queue]>#suggestions-search{
    position:sticky;
    /*top:0;*/
    top: calc( -1 * var(--tab-content-padding, 0px)) ;
    z-index:2;
}

ytd-watch-flexy[is-two-columns_]:not([theater]) #tab-videos>[placeholder-videos]{
    overflow: auto;
    padding:var(--tab-content-padding, 0px);
    padding-right: 4px;
}


body>.autocomplete-suggestions:not([position-fixed-by-tabview-youtube]){
    z-index:-1;
    visibility:collapse;
}

.autocomplete-suggestions[position-fixed-by-tabview-youtube]{
    position:absolute !important;
    /*display:block !important;*/
    left:auto !important;
    top:auto !important;
    margin:0 !important;
    z-index:2 !important; 
    margin-top:-1px !important;
}

BFJQ{
    position:sticky;
    top: calc( var(--height, auto) + -1 * var(--tab-content-padding, 0px)) ;
    overflow:visible;
    display: block;

    left:auto;
    width:80%;

    z-index:2;
    margin-top: calc( -1 * ( var(--sb-margin-bottom) ) );
    margin-bottom: calc( 1 * ( var(--sb-margin-bottom) ) );
    
    
}